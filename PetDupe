-- LocalScript â€“ Place in StarterPlayerScripts or StarterGui

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Config
local ITEM_NAME = "Dragonfly [2.57 KG] [Age 21]"
local GUI_TITLE_TEXT = "Toslow DUPE script"
local BUTTON_TEXT = "DUPE"

-- Clone the tool from local backpack
local function performDupeAction()
	local backpack = LocalPlayer:FindFirstChild("Backpack")
	if not backpack then
		warn("Backpack not found.")
		return
	end

	local tool = backpack:FindFirstChild(ITEM_NAME)
	if tool and tool:IsA("Tool") then
		local clonedTool = tool:Clone()
		clonedTool.Parent = backpack
		print("Cloned tool into backpack:", clonedTool.Name)
	else
		warn("Tool not found or not a valid Tool:", ITEM_NAME)
	end
end

-- Create GUI
local function createGUI()
	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = "DupeScriptGUI"
	screenGui.ResetOnSpawn = false
	screenGui.Parent = PlayerGui

	local mainFrame = Instance.new("Frame")
	mainFrame.Name = "MainFrame"
	mainFrame.Size = UDim2.new(0, 250, 0, 120)
	mainFrame.Position = UDim2.new(0, 860, 0, 172) -- << Custom position
	mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	mainFrame.BorderSizePixel = 0
	mainFrame.Parent = screenGui

	local uicorner = Instance.new("UICorner")
	uicorner.CornerRadius = UDim.new(0.1, 0)
	uicorner.Parent = mainFrame

	local titleLabel = Instance.new("TextLabel")
	titleLabel.Size = UDim2.new(1, -40, 0, 30)
	titleLabel.Position = UDim2.new(0, 10, 0, 5)
	titleLabel.BackgroundTransparency = 1
	titleLabel.Text = GUI_TITLE_TEXT
	titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	titleLabel.TextSize = 20
	titleLabel.Font = Enum.Font.SourceSansBold
	titleLabel.TextXAlignment = Enum.TextXAlignment.Left
	titleLabel.Parent = mainFrame

	local closeButton = Instance.new("TextButton")
	closeButton.Size = UDim2.new(0, 25, 0, 25)
	closeButton.Position = UDim2.new(1, -30, 0, 5)
	closeButton.Text = "X"
	closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	closeButton.TextSize = 18
	closeButton.Font = Enum.Font.SourceSansBold
	closeButton.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
	closeButton.Parent = mainFrame

	local uicornerClose = Instance.new("UICorner")
	uicornerClose.CornerRadius = UDim.new(0.2, 0)
	uicornerClose.Parent = closeButton

	closeButton.MouseButton1Click:Connect(function()
		screenGui:Destroy()
	end)

	local dupeButton = Instance.new("TextButton")
	dupeButton.Size = UDim2.new(0.8, 0, 0, 40)
	dupeButton.Position = UDim2.new(0.1, 0, 0, 60)
	dupeButton.BackgroundColor3 = Color3.fromRGB(0, 100, 255)
	dupeButton.Text = BUTTON_TEXT
	dupeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	dupeButton.TextSize = 22
	dupeButton.Font = Enum.Font.SourceSansBold
	dupeButton.Parent = mainFrame

	local dupeCorner = Instance.new("UICorner")
	dupeCorner.CornerRadius = UDim.new(0.1, 0)
	dupeCorner.Parent = dupeButton

	dupeButton.MouseButton1Click:Connect(performDupeAction)

	-- Make GUI draggable
	local dragging = false
	local dragInput, dragStart, startPos

	mainFrame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = mainFrame.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	mainFrame.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)

	game:GetService("UserInputService").InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			local delta = input.Position - dragStart
			mainFrame.Position = UDim2.new(
				startPos.X.Scale,
				startPos.X.Offset + delta.X,
				startPos.Y.Scale,
				startPos.Y.Offset + delta.Y
			)
		end
	end)
end

-- Create GUI immediately if character already loaded
if LocalPlayer.Character then
	createGUI()
else
	LocalPlayer.CharacterAdded:Connect(createGUI)
end
